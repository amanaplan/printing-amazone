const SERVER_ADDR='http://printingamazon.site/';var googleUser={},startApp=function(){gapi.load('auth2',function(){auth2=gapi.auth2.init({client_id:'38890949573-8sjuit3hpgfjoadjfe62312va55m8pdc.apps.googleusercontent.com',cookiepolicy:'single_host_origin',scope:'profile email'}),attachSignin(document.getElementById('customLogin')),attachSignup(document.getElementById('customSignup'))})};function attachSignin(a){auth2.attachClickHandler(a,{},function(b){var c=b.getBasicProfile().getEmail();$('#login-processing-msg').html('Logging in. . . <i class="fa fa-refresh fa-spin fa-lg"></i>'),$('signin-button').prop('disabled',!0),$('#login-msg').css('display','none'),$.ajaxSetup({headers:{'X-CSRF-TOKEN':$('meta[name="csrf-token"]').attr('content')},url:SERVER_ADDR+'attempt/google-login',type:'POST',dataType:'json',data:{email:c},success:function(d){1==d.error?($('#login-msg').removeClass('alert-success').addClass('alert-danger').html('<strong>'+d.msg+'</strong>').css('display','block'),$('#login-processing-msg').html('Login via'),$('signin-button').prop('disabled',!1),alert('some error')):($('#login-processing-msg').hide(),$('#login-msg').removeClass('alert-danger').addClass('alert-success').html('<strong>'+d.msg+'</strong>').css('display','block'),document.location.reload())},error:function(){$('#login-processing-msg').html('Login via'),$('#login-msg').removeClass('alert-success').addClass('alert-danger').html('<strong>Upss! some server error occurred try again</strong>').css('display','block'),$('signin-button').prop('disabled',!1)}}),$.ajax()},function(){})}function attachSignup(a){auth2.attachClickHandler(a,{},function(b){var c=b.getBasicProfile().getEmail(),d=b.getBasicProfile().getName();$('#signup-processing-msg').html('Creating account. . . <i class="fa fa-refresh fa-spin fa-lg"></i>'),$('signup-button').prop('disabled',!0),$('#signup-msg').css('display','none'),$.ajaxSetup({headers:{'X-CSRF-TOKEN':$('meta[name="csrf-token"]').attr('content')},url:SERVER_ADDR+'attempt/google-signup',type:'POST',dataType:'json',data:{email:c,name:d},success:function(e){1==e.error?($('#signup-msg').removeClass('alert-success').addClass('alert-danger').html('<strong>'+e.msg+'</strong>').css('display','block'),$('#signup-processing-msg').html('Signup via'),$('signup-button').prop('disabled',!1)):($('#signup-processing-msg').hide(),$('#signup-msg').removeClass('alert-danger').addClass('alert-success').html('<strong>'+e.msg+'</strong>').css('display','block'),document.location.assign(SERVER_ADDR+'user/set-password'))},error:function(){$('#signup-processing-msg').html('Signup via'),$('#signup-msg').removeClass('alert-success').addClass('alert-danger').html('<strong>Upss! some server error occurred try again</strong>').css('display','block'),$('signup-button').prop('disabled',!1)}}),$.ajax()},function(){})}startApp();function LogoffUser(){$.ajaxSetup({headers:{'X-CSRF-TOKEN':$('meta[name="csrf-token"]').attr('content')},url:SERVER_ADDR+'user/logout',type:'POST',success:function(){var b=gapi.auth2.getAuthInstance();b.signOut().then(function(){}),document.location.assign(SERVER_ADDR)},error:function(){document.location.assign(SERVER_ADDR)}}),$.ajax()}$('nav.main-nav ol li.dropdown').hover(function(){$(this).find('.dropdown-menu').stop(!0,!0).delay(50).fadeIn()},function(){$(this).find('.dropdown-menu').stop(!0,!0).delay(50).fadeOut()}),$('button#signin-button').click(function(){var a=$(this),b=$('input#signin-email'),c=$('input#signin-password'),d=$.trim(b.val()),e=$.trim(c.val()),f=$('#remember-me').is(':checked')?1:0;''===d?(b.css('border','1px solid #ff0000'),c.css('border','1px solid #d2d8d8')):''===e?(c.css('border','1px solid #ff0000'),b.css('border','1px solid #d2d8d8')):(b.css('border','1px solid #d2d8d8'),c.css('border','1px solid #d2d8d8'),a.prop('disabled',!0),a.html('<i class="fa fa-refresh fa-spin fa-fw"></i> Please wait. . .'),$.ajaxSetup({headers:{'X-CSRF-TOKEN':$('meta[name="csrf-token"]').attr('content')},url:SERVER_ADDR+'attempt/user-login',type:'POST',dataType:'json',data:{email:d,password:e,rem:f},success:function(g){1==g.error?($('#login-msg').removeClass('alert-success').addClass('alert-danger').html('<strong>'+g.msg+'</strong>').css('display','block'),c.val('')):($('#login-msg').removeClass('alert-danger').addClass('alert-success').html('<strong>'+g.msg+'</strong>').css('display','block'),b.val(''),c.val(''),document.location.reload()),a.prop('disabled',!1),a.html('Sign In')},error:function(){$('#login-msg').removeClass('alert-success').addClass('alert-danger').html('<strong>Upss! some server error occurred try again</strong>').css('display','block'),a.prop('disabled',!1),a.html('Sign In')}}),$.ajax())}),$('form#login-form').submit(function(a){a.preventDefault(),!0!=$('button#signin-button').prop('disabled')&&$('button#signin-button').click()}),$('button#signup-button').click(function(){var a=$(this),b=$('input#signup-email'),c=$.trim(b.val()),d=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;''===c?b.css('border','1px solid #ff0000'):''!=c&&(!0==d.test(b.val())?(b.css('border','1px solid #d2d8d8'),a.prop('disabled',!0),a.html('<i class="fa fa-refresh fa-spin fa-fw"></i> Please wait. . .'),$.ajaxSetup({headers:{'X-CSRF-TOKEN':$('meta[name="csrf-token"]').attr('content')},url:SERVER_ADDR+'attempt/signup-via-email',type:'POST',dataType:'json',data:{mail:b.val()},success:function(e){1==e.error?$('#signup-msg').removeClass('alert-success').addClass('alert-danger').html('<strong>'+e.msg+'</strong>').css('display','block'):($('#signup-msg').removeClass('alert-danger').addClass('alert-success').html('<strong>'+e.msg+'</strong>').css('display','block'),b.val('')),a.prop('disabled',!1),a.html('Create Account')},error:function(){$('#signup-msg').removeClass('alert-success').addClass('alert-danger').html('<strong>Upss! some server error occurred try again</strong>').css('display','block'),a.prop('disabled',!1),a.html('Create Account')}}),$.ajax()):b.css('border','1px solid #ff0000'))}),$('form#signup-form').submit(function(a){a.preventDefault(),!0!=$('button#signup-btn').prop('disabled')&&$('button#signup-btn').click()});